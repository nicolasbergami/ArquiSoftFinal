{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\go\\\\src\\\\github.com\\\\AgusZanini\\\\Trabajo-arqui-master\\\\front\\\\src\\\\Order.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport \"./css/Order.css\";\nimport logo from \"./images/home.png\";\nimport Cookies from \"universal-cookie\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Cookie = new Cookies();\n\nasync function getUserById(id) {\n  return fetch(\"http://127.0.0.1:8080/user/\" + id, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => response.json());\n}\n\nasync function getProductById(id) {\n  return fetch(\"http://127.0.0.1:8080/product/\" + id, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => response.json());\n}\n\nasync function getOrderById(id) {\n  return fetch(\"http://127.0.0.1:8080/order/\" + id, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }).then(response => response.json());\n}\n\nfunction goto(path) {\n  window.location = window.location.origin + path;\n}\n\nfunction logout() {\n  Cookie.set(\"user_id\", -1, {\n    path: \"/\"\n  });\n  window.location.reload();\n}\n\nasync function getOrderProducts() {\n  let items = [];\n  let a = Cookie.get(\"order\").split(\";\");\n\n  for (let i = 0; i < a.length; i++) {\n    let item = a[i];\n\n    if (item != \"\") {\n      let array = item.split(\",\");\n      let id = array[0];\n      let quantity = array[1];\n      let product = await getProductById(id);\n      product.quantity = quantity;\n      items.push(product);\n    }\n  }\n\n  return items;\n}\n\nasync function setOrder(setOrder, setTotal) {\n  let total = 0;\n  await getOrderProducts().then(response => {\n    setOrder(response);\n    response.forEach(item => {\n      total += item.base_price * item.quantity;\n    });\n    setTotal(total);\n  });\n}\n\nfunction Order() {\n  _s();\n\n  const [user, setUser] = useState({});\n  const [isLogged, setIsLogged] = useState(false);\n  const [orderProducts, setOrderProducts] = useState([]);\n  const [total, setTotal] = useState(0);\n\n  const login = /*#__PURE__*/_jsxDEV(\"span\", {\n    children: /*#__PURE__*/_jsxDEV(\"a\", {\n      id: \"logout\",\n      onClick: logout,\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [user.first_name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 38\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n\n  if (Cookie.get(\"user_id\") > -1 && !isLogged) {\n    getUserById(Cookie.get(\"user_id\")).then(response => setUser(response));\n    setIsLogged(true);\n  }\n\n  if (orderProducts.length <= 0 && Cookie.get(\"user_id\") > -1) {\n    setOrder(setOrderProducts, setTotal);\n  }\n\n  const complete = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"Pedido\",\n        children: \"Compra completada con exito...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        className: \"boton-vacio\",\n        href: \"/\",\n        children: \" Volver \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n\n  const error = /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" ERROR :(((( \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\" Error \", Cookie.get(\"orderError\"), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \" X \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      class: \" purple \",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"nav-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/\",\n          class: \"brand-logo center blue-text text-darken-2\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: logo,\n            width: \"80px\",\n            height: \"60px\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 73\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          id: \"nav-mobile\",\n          class: \"right hide-on-med-and-down\",\n          children: /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"Sesion\",\n              onClick: logout,\n              children: \"Cerrar Sesion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"main\",\n      children: window.location.pathname.split(\"/\")[2] == \"complete\" ? complete : error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Order, \"DLoLAmLTj6R/ejWYrAtDVffABiE=\");\n\n_c = Order;\nexport default Order;\n\nvar _c;\n\n$RefreshReg$(_c, \"Order\");","map":{"version":3,"names":["React","useState","logo","Cookies","Cookie","getUserById","id","fetch","method","headers","then","response","json","getProductById","getOrderById","goto","path","window","location","origin","logout","set","reload","getOrderProducts","items","a","get","split","i","length","item","array","quantity","product","push","setOrder","setTotal","total","forEach","base_price","Order","user","setUser","isLogged","setIsLogged","orderProducts","setOrderProducts","login","first_name","complete","error","pathname"],"sources":["C:/Users/Usuario/go/src/github.com/AgusZanini/Trabajo-arqui-master/front/src/Order.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport \"./css/Order.css\";\r\nimport logo from \"./images/home.png\"\r\nimport Cookies from \"universal-cookie\";\r\n\r\nconst Cookie = new Cookies();\r\n\r\nasync function getUserById(id){\r\n  return fetch(\"http://127.0.0.1:8080/user/\" + id, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  }).then(response => response.json())\r\n}\r\n\r\nasync function getProductById(id){\r\n  return fetch(\"http://127.0.0.1:8080/product/\" + id, {\r\n    method: \"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  }).then(response => response.json())\r\n}\r\n\r\nasync function getOrderById(id) {\r\n  return fetch(\"http://127.0.0.1:8080/order/\" + id, {\r\n    method:\"GET\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  }).then(response => response.json())\r\n}\r\n\r\nfunction goto(path){\r\n  window.location = window.location.origin + path\r\n}\r\n\r\nfunction logout(){\r\n  Cookie.set(\"user_id\", -1, {path:\"/\"})\r\n  window.location.reload();\r\n}\r\n\r\n\r\n\r\nasync function getOrderProducts(){\r\n  let items = []\r\n  let a = Cookie.get(\"order\").split(\";\")\r\n\r\n  for (let i = 0; i < a.length; i++){\r\n    let item = a[i];\r\n    if(item != \"\"){\r\n      let array = item.split(\",\")\r\n      let id = array[0]\r\n      let quantity = array[1]\r\n      let product = await getProductById(id)\r\n      product.quantity = quantity;\r\n      items.push(product)\r\n    }\r\n  }\r\n  return items\r\n}\r\n\r\n\r\nasync function setOrder(setOrder, setTotal){\r\n  let total = 0;\r\n  await getOrderProducts().then(response => {\r\n    setOrder(response)\r\n    response.forEach((item) => {\r\n      total += item.base_price * item.quantity;\r\n    });\r\n    setTotal(total)\r\n  })\r\n}\r\n\r\n\r\n\r\nfunction Order(){\r\n  const [user, setUser] = useState({});\r\n  const [isLogged, setIsLogged] = useState(false);\r\n  const [orderProducts, setOrderProducts] = useState([])\r\n  const [total, setTotal] = useState(0)\r\n\r\n  const login = (\r\n\r\n    <span>\r\n    <a id=\"logout\" onClick={logout}> <span>{user.first_name} </span> </a>\r\n    </span>\r\n  )\r\n\r\n  if (Cookie.get(\"user_id\") > -1 && !isLogged) {\r\n    getUserById(Cookie.get(\"user_id\")).then(response => setUser(response))\r\n    setIsLogged(true)\r\n  }\r\n\r\n\r\n  if (orderProducts.length <= 0 && Cookie.get(\"user_id\") > -1){\r\n    setOrder(setOrderProducts, setTotal)\r\n  }\r\n\r\n  const complete = (\r\n    <div>\r\n      <div>\r\n        <h1 className=\"Pedido\">Compra completada con exito...</h1>\r\n        <a className=\"boton-vacio\" href=\"/\"> Volver </a>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n\r\n  const error = (\r\n    <div>\r\n    <div> ERROR :(((( </div>\r\n    <div> Error {Cookie.get(\"orderError\")} </div>\r\n    <h1> X </h1>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div className=\"order\">\r\n      <nav class=\" purple \">\r\n        <div class=\"nav-wrapper\">\r\n          <a href=\"/\" class=\"brand-logo center blue-text text-darken-2\"><img src={logo} width=\"80px\" height=\"60px\" /></a>\r\n          <ul id=\"nav-mobile\" class=\"right hide-on-med-and-down\">\r\n          <li><a className=\"Sesion\" onClick={logout}>Cerrar Sesion</a></li>\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n\r\n\r\n\r\n      <div id=\"main\">\r\n        {window.location.pathname.split(\"/\")[2] == \"complete\" ? complete : error}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Order;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}